<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Precios Cripto en Vivo (CoinGecko)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 30px;
      background-color: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      color: #ffcc00;
      margin-bottom: 30px;
    }
    table {
      width: 90%;
      max-width: 700px;
      border-collapse: collapse;
      background-color: #1b1b1b;
      box-shadow: 0 0 15px rgba(255, 255, 255, 0.1);
      border-radius: 10px;
      overflow: hidden;
    }
    th, td {
      padding: 15px 20px;
      text-align: left;
    }
    th {
      background-color: #ffcc00;
      color: #111;
      font-size: 1.1em;
      text-transform: uppercase;
    }
    tr:nth-child(even) { background-color: #222; }
    tr:nth-child(odd) { background-color: #181818; }
    .coin {
      font-weight: bold;
      color: #ffcc00;
      font-size: 1.1em;
      width: 40%;
    }
    .price { line-height: 1.6; }
    .updated {
      margin-top: 25px;
      font-size: 0.9em;
      color: #aaa;
    }
  </style>
</head>
<body>
  <h1>Precios Cripto en Vivo</h1>

  <table>
    <thead>
      <tr>
        <th>Criptomoneda</th>
        <th>Precios (USD / MXN / EUR / CNY)</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td class="coin">Bitcoin (BTC)</td>
        <td class="price" id="btc-prices">Cargandoâ€¦</td>
      </tr>
      <tr>
        <td class="coin">Ethereum (ETH)</td>
        <td class="price" id="eth-prices">Cargandoâ€¦</td>
      </tr>
      <tr>
        <td class="coin">Solana (SOL)</td>
        <td class="price" id="sol-prices">Cargandoâ€¦</td>
      </tr>
    </tbody>
  </table>

  <div class="updated" id="last-updated"></div>

  <script>
    async function fetchPrices() {
      try {
        const response = await fetch(
          'https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,solana&vs_currencies=usd,mxn,eur,cny',
          { cache: 'no-store' }
        );
        if (!response.ok) throw new Error('HTTP ' + response.status);
        const data = await response.json();

        const btc = data.bitcoin || {};
        const eth = data.ethereum || {};
        const sol = data.solana || {};

        const n = (v) => (typeof v === 'number' ? v.toLocaleString() : 'â€”');

        document.getElementById('btc-prices').innerHTML = `
          ðŸ‡ºðŸ‡¸ USD: $${n(btc.usd)}<br>
          ðŸ‡²ðŸ‡½ MXN: $${n(btc.mxn)}<br>
          ðŸ‡ªðŸ‡º EUR: â‚¬${n(btc.eur)}<br>
          ðŸ‡¨ðŸ‡³ CNY: Â¥${n(btc.cny)}
        `;
        document.getElementById('eth-prices').innerHTML = `
          ðŸ‡ºðŸ‡¸ USD: $${n(eth.usd)}<br>
          ðŸ‡²ðŸ‡½ MXN: $${n(eth.mxn)}<br>
          ðŸ‡ªðŸ‡º EUR: â‚¬${n(eth.eur)}<br>
          ðŸ‡¨ðŸ‡³ CNY: Â¥${n(eth.cny)}
        `;
        document.getElementById('sol-prices').innerHTML = `
          ðŸ‡ºðŸ‡¸ USD: $${n(sol.usd)}<br>
          ðŸ‡²ðŸ‡½ MXN: $${n(sol.mxn)}<br>
          ðŸ‡ªðŸ‡º EUR: â‚¬${n(sol.eur)}<br>
          ðŸ‡¨ðŸ‡³ CNY: Â¥${n(sol.cny)}
        `;

        document.getElementById('last-updated').textContent =
          'Ãšltima actualizaciÃ³n: ' + new Date().toLocaleTimeString();
      } catch (error) {
        console.error('Error al obtener precios:', error);
        const msg = String(error).includes('429')
          ? 'CoinGecko limitÃ³ las solicitudes (429). Intenta nuevamente en unos minutos.'
          : 'No se pudieron obtener los precios.';
        document.getElementById('last-updated').textContent = msg;
      }
    }

    fetchPrices();
    setInterval(fetchPrices, 60000);
  </script>
</body>
</html>
